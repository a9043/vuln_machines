<<<<<<< HEAD
# Система управления уязвимыми машинами

Веб-приложение для управления уязвимыми машинами с авторизацией, правами доступа и CRUD операциями.

## Технологии

### Backend
- **Django 4.2** - веб-фреймворк
- **Django REST Framework** - API
- **djangorestframework-simplejwt** - JWT авторизация
- **SQLite** - база данных

### Frontend
- **Vue.js 3** - JavaScript фреймворк
- **Axios** - HTTP клиент
- **Vue Router** - маршрутизация

## Структура проекта

```
summer-practice-vuln-machines/
├── vuln_machines/          # Django backend
│   ├── machines/           # Приложение для машин
│   ├── manage.py
│   └── vuln_machines/     # Настройки Django
├── vue-frontend/          # Vue.js frontend
│   ├── src/
│   │   ├── components/    # Vue компоненты
│   │   └── router/        # Маршрутизация
│   └── package.json
└── .venv/                 # Виртуальное окружение Python
```

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd summer-practice-vuln-machines
```

### 2. Настройка Backend (Django)

#### Активация виртуального окружения
```bash
# Windows
.venv\Scripts\activate

# Linux/Mac
source .venv/bin/activate
```

#### Установка зависимостей Python
```bash
cd vuln_machines
pip install -r requirements.txt
```

#### Применение миграций
```bash
python manage.py migrate
```

#### Создание суперпользователя (опционально)
```bash
python manage.py createsuperuser
```

#### Запуск Django сервера
```bash
python manage.py runserver
```

Backend будет доступен по адресу: `http://localhost:8000`

### 3. Настройка Frontend (Vue.js)

#### Установка зависимостей Node.js
```bash
cd vue-frontend
npm install
```

#### Запуск Vue.js сервера разработки
```bash
npm run serve
```

Frontend будет доступен по адресу: `http://localhost:8080`

## Использование

### Регистрация и авторизация

1. Откройте `http://localhost:8080`
2. Нажмите "Вход" в заголовке
3. Выберите "Регистрация"
4. Заполните форму:
   - **Имя пользователя** - уникальное имя
   - **Пароль** - минимум 8 символов
   - **Тип пользователя** - "admin" или "user"
5. Нажмите "Зарегистрироваться"
6. Войдите с созданными данными

### Управление машинами

#### Создание машины
1. Нажмите кнопку "Добавить машину" в таблице
2. Заполните обязательные поля:
   - **Название** - название машины
   - **ID уязвимости** - формат Vuln-XXX (например: Vuln-001)
   - **Описание** - подробное описание
   - **Теги** - через запятую (например: RCE, SQLi)
   - **В каких СЗИ детектируется** - через запятую
   - **Версия ESXi** - версия ESXi
   - **Версия ОС** - версия операционной системы
3. Заполните остальные поля по необходимости
4. Нажмите "Добавить"

#### Редактирование машины
1. Выберите машину в таблице
2. В правой панели нажмите "Редактировать"
3. Измените нужные поля
4. Нажмите "Сохранить"

#### Удаление машины
1. Выберите машину в таблице
2. В правой панели нажмите кнопку удаления (корзина)
3. Подтвердите удаление

### Права доступа

- **Администраторы** - полный доступ ко всем машинам
- **Обычные пользователи** - доступ только к своим машинам
- **Создатель машины** - может редактировать и удалять свои машины

### Фильтрация и поиск

- **Фильтр по типу** - "Готовые", "Идеи", "Все"
- **Поиск** - по названию, ID, статусу, ОС

## API Endpoints

### Авторизация
- `POST /api/auth/register/` - регистрация
- `POST /api/auth/login/` - вход
- `POST /api/auth/refresh/` - обновление токена

### Машины
- `GET /api/machines/` - список машин
- `POST /api/machines/` - создание машины
- `GET /api/machines/{id}/` - детали машины
- `PATCH /api/machines/{id}/` - редактирование
- `DELETE /api/machines/{id}/` - удаление

## Модель данных

### VulnerableMachine
- `name` - название машины
- `vuln_id` - ID уязвимости (Vuln-XXX)
- `type` - тип (ready/idea)
- `status` - статус (Используется/Не используется)
- `description` - описание
- `tags` - теги уязвимостей
- `os` - операционная система
- `esxi_version` - версия ESXi
- `os_version` - версия ОС
- `creator` - создатель машины
- и другие поля...

## Устранение неполадок

### Backend не запускается
1. Проверьте, что виртуальное окружение активировано
2. Убедитесь, что все зависимости установлены
3. Проверьте, что миграции применены

### Frontend не запускается
1. Убедитесь, что Node.js установлен
2. Проверьте, что все npm пакеты установлены
3. Проверьте, что порт 8080 свободен

### Ошибки авторизации
1. Проверьте, что JWT токен не истек
2. Попробуйте перелогиниться
3. Очистите localStorage браузера

### Ошибки 400 при создании/редактировании
1. Проверьте, что все обязательные поля заполнены
2. Убедитесь, что ID уязвимости в правильном формате
3. Проверьте консоль браузера для деталей ошибки

## Разработка

### Добавление новых полей
1. Измените модель в `vuln_machines/machines/models.py`
2. Создайте миграцию: `python manage.py makemigrations`
3. Примените миграцию: `python manage.py migrate`
4. Обновите сериализатор в `serializers.py`
5. Обновите фронтенд компоненты

### Изменение прав доступа
1. Отредактируйте `permissions.py`
2. Обновите views в `views.py`
3. Проверьте фронтенд логику в компонентах

## Лицензия

Проект создан в учебных целях. 
=======